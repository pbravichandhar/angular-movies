/*! angular-movielist 19-07-2014 */
"use strict";var movieApp=angular.module("movieApp",["ngRoute","movieControllers","movieServices"]);movieApp.directive("movielist",function(){return{restrict:"E",template:"<div class='movieOuter' ng-repeat='movieitem in movieslist.parts'><a ng-href='#/{{movieitem.id}}' ng-click='selectMovie(movieitem.id)' ng-init='selectMovie(initMovie)'><div class='movieInner'><img ng-src='http://image.tmdb.org/t/p/w500{{movieitem.poster_path}}' ng-class='{ selected: movieitem.id == isMovieSelected }' class='circular'/></div><h2 class='movieInner' ng-class='{ selected: movieitem.id == isMovieSelected }'>{{movieitem.title}}</h2></a></div>",replace:!0,controller:"MovieListCtrl"}}),movieApp.config(["$routeProvider",function(a){a.when("/",{templateUrl:"partials/overview.html",controller:"MovieListCtrl"}).when("/:movieId",{templateUrl:"partials/movie-detail.html",controller:"MovieDetailCtrl"}).otherwise({redirectTo:"/"})}]);var movieControllers=angular.module("movieControllers",["movieServices"]);movieControllers.controller("MovieListCtrl",["$scope","$http","$routeParams","$location","Movies",function(a,b,c,d,e){a.initMovie="218","undefined"!=d.$$path&&(a.initMovie=d.$$path.split("/")[1]),console.log(a.initMovie),a.movieslistImage=null,e.getMovies().then(function(b){a.movieslist=b.data,console.log(a.movieslist),a.movieslistImage="http://image.tmdb.org/t/p/w500/"+a.movieslist.poster_path}),a.isMovieSelected=null,a.selectMovie=function(b){a.isMovieSelected=b,console.log("is movie selected",a.isMovieSelected)}}]),movieControllers.controller("MovieDetailCtrl",["$scope","$routeParams","$http","Movies",function(a,b,c,d){a.movieImage=null,d.getMovieInfo(b.movieId).then(function(b){a.movie=b.data,a.movieImage="http://image.tmdb.org/t/p/w500"+a.movie.poster_path}),d.getMovieCredits(b.movieId).then(function(b){a.credits=b.data,console.log("credits",a.credits)}),a.imgValue=null,a.isSelected=null,a.changeImage=function(b){a.imgValue="http://image.tmdb.org/t/p/w500"+a.credits.cast[b].profile_path,a.isSelected=b}}]);var movieServices=angular.module("movieServices",[]);movieServices.factory("Movies",["$http",function(a){var b="https://api.themoviedb.org/3/",c={};return c.getMovies=function(){return a({url:b+"collection/528",method:"GET",cache:!0,params:{api_key:"939a3346ba15aa366521cb3895a528fd"}})},c.getMovieInfo=function(c){return a({url:b+"movie/"+c,method:"GET",cache:!0,params:{api_key:"939a3346ba15aa366521cb3895a528fd"}})},c.getMovieCredits=function(c){return a({url:b+"movie/"+c+"/credits",method:"GET",cache:!0,params:{api_key:"939a3346ba15aa366521cb3895a528fd"}})},c}]);